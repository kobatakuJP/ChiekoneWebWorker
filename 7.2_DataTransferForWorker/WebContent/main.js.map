{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/main.ts"],"names":[],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/main.ts\");\n","declare global {\r\n    // グローバル変数にクラスを保持しておく\r\n    interface Window { empsForWorker: { [key: string]: Employer }; }\r\n}\r\n\r\n/** 実行 */\r\nexport function work(mode: \"str\" | \"trans\" | \"sab\", num: number, str: \"a\" | \"b\" | \"c\" = \"a\") {\r\n    for (let i = 0; i < num; i++) {\r\n        switch (mode) {\r\n            case \"str\":\r\n            case \"sab\":\r\n            case \"trans\":\r\n                window.empsForWorker[mode].exec(str);\r\n                break;\r\n            default:\r\n                console.log(\"オプションミス(str|trans|sab|all)\");\r\n                break;\r\n        }\r\n    }\r\n}\r\n\r\n/** Wokerを酷使する人 */\r\nabstract class Employer {\r\n    num: number;\r\n    sepnum: number;\r\n    dataA: string | Float32Array | SharedArrayBuffer;\r\n    dataB: string | Float32Array | SharedArrayBuffer;\r\n    dataC: string | Float32Array | SharedArrayBuffer;\r\n    worker: Worker;\r\n    transferable: boolean;\r\n    constructor() {\r\n        this.num = 8 * 1000 * 1000;\r\n        this.sepnum = 8;\r\n        this.transferable = false;\r\n    }\r\n    exec(str: string): void {\r\n        const data = str === \"a\" ? this.dataA : str === \"b\" ? this.dataB : this.dataC;\r\n        const strtime = Date.now();\r\n        if (this.transferable) {\r\n            this.worker.postMessage({ val: data, time: strtime }, [(<Float32Array>data).buffer]);\r\n        } else {\r\n            this.worker.postMessage({ val: data, time: strtime });\r\n        }\r\n    }\r\n}\r\n\r\n/** StrWokerを酷使する人 */\r\nclass StrEmployer extends Employer {\r\n    constructor() {\r\n        super();\r\n        // ビルド後のjsファイルを指定する。\r\n        this.worker = new Worker(\"StrWorker.js\");\r\n        this.dataA = \"\";\r\n        this.dataB = \"\";\r\n        this.dataC = \"\";\r\n        for (let i = 0; i < this.num; i++) {\r\n            this.dataA += \"a\";\r\n            this.dataB += \"b\";\r\n            this.dataC += \"c\";\r\n        }\r\n    }\r\n}\r\n\r\n/** TransWokerを酷使する人 */\r\nclass TransEmployer extends Employer {\r\n    constructor() {\r\n        super();\r\n        // ビルド後のjsファイルを指定する。\r\n        this.worker = new Worker(\"TransWorker.js\");\r\n        this.dataA = new Float32Array(this.num);\r\n        this.dataB = new Float32Array(this.num);\r\n        this.dataC = new Float32Array(this.num);\r\n        for (let i = 0; i < this.num; i++) {\r\n            this.dataA[i] = \"a\".codePointAt(0);\r\n            this.dataB[i] = \"b\".codePointAt(0);\r\n            this.dataC[i] = \"c\".codePointAt(0);\r\n        }\r\n    }\r\n}\r\n\r\n/** SABWokerを酷使する人 */\r\nclass SABEmployer extends Employer {\r\n    constructor() {\r\n        super();\r\n        // ビルド後のjsファイルを指定する。\r\n        this.worker = new Worker(\"SABWorker.js\");\r\n        this.dataA = new SharedArrayBuffer(this.num * 4);\r\n        this.dataB = new SharedArrayBuffer(this.num * 4);\r\n        this.dataC = new SharedArrayBuffer(this.num * 4);\r\n        // SharedArrayBufferにデータを詰めるためにViewを生成\r\n        let sabFa = new Float32Array(this.dataA);\r\n        let sabFb = new Float32Array(this.dataB);\r\n        let sabFc = new Float32Array(this.dataC);\r\n        for (let i = 0; i < this.num; i++) {\r\n            sabFa[i] = \"a\".codePointAt(0);\r\n            sabFb[i] = \"b\".codePointAt(0);\r\n            sabFc[i] = \"c\".codePointAt(0);\r\n        }\r\n    }\r\n}\r\n\r\n// 雇い主を作成しておく\r\nwindow.empsForWorker = {\r\n    \"str\": new StrEmployer(),\r\n    \"trans\": new TransEmployer(),\r\n    \"sab\": new SABEmployer()\r\n}"],"sourceRoot":""}